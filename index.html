<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frisky - Premium Chocolate Craftsmanship</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #3c2415; /* Dark chocolate brown */
            color: #333;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            padding: 2rem 2rem;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand-name {
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 1.5rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: -0.5px;
            transition: all 0.3s ease;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .brand-name:hover {
            color: #ffffff;
            transform: translateY(-2px);
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        nav {
            position: relative;
            display: flex;
            align-items: center;
        }

        .nav-menu {
            display: flex;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }

        nav a {
            color: rgba(255, 255, 255, 0.8); /* White with slight transparency */
            background-color: rgba(60, 36, 21, 0.6); /* Semi-transparent dark chocolate brown */
            text-decoration: none;
            font-size: 0.9rem;
            padding: 0.6rem 1.4rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px; /* Rounded corners */
            transition: all 0.3s ease;
            display: inline-block;
            backdrop-filter: blur(10px); /* Subtle glass effect */
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.9);
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        /* Hamburger animation */
        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        nav a:hover {
            color: #ffffff; /* Pure white */
            background-color: rgba(60, 36, 21, 0.9); /* More opaque dark chocolate brown */
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        /* Main Container */
        .main-container {
            height: 600vh;
            position: relative;
            margin: 0;
            padding: 0;
        }

        /* Canvas Styles */
        canvas {
            position: sticky;
            top: 0;
            width: 100vw;
            height: 100vh;
            display: block;
            background-color: #3c2415; /* Dark chocolate brown */
            margin: 0;
            padding: 0;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
            image-rendering: pixelated;
        }

        /* Dark Overlay for Canvas */
        .canvas-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.3) 100%);
            pointer-events: none;
            z-index: 50;
            mix-blend-mode: multiply;
        }

        /* Text Overlay Styles */
        .text-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: all 1s cubic-bezier(0.23, 1, 0.32, 1);
            max-width: 600px;
            margin: 0 auto;
            padding: 0 2rem;
            width: 100%;
        }

        .text-overlay.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .cta-wrapper {
            margin-top: 3rem;
            display: inline-block;
            pointer-events: auto;
        }

        .headline {
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 3.5rem;
            font-weight: 400;
            color: #fff;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -1px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .subtext {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 1.2rem;
            color: #fff;
            line-height: 1.6;
            font-weight: 300;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.5), 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .cta-button {
            margin-top: 3rem;
            padding: 1rem 2.5rem;
            background-color: rgba(60, 36, 21, 0.8); /* Semi-transparent dark chocolate brown */
            color: rgba(255, 255, 255, 0.9); /* Light white */
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 30px; /* Rounded corners */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            text-decoration: none;
            display: inline-block;
            backdrop-filter: blur(10px); /* Subtle glass effect */
        }

        .cta-button.show {
            opacity: 1;
            transform: translateY(0);
        }

        .cta-button:hover {
            color: #ffffff; /* Pure white */
            background-color: #3c2415; /* Solid dark chocolate brown */
            border-color: rgba(255, 255, 255, 0.8);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }

        /* Footer Styles */
        footer {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 1000;
            pointer-events: none;
        }

        .tagline {
            font-family: Georgia, 'Times New Roman', Times, serif;
            font-size: 1.1rem;
            color: #f39c12; /* Gold color */
            margin-bottom: 0.5rem;
            font-style: italic;
        }

        .copyright {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7); /* White with transparency */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .built-by {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.5); /* Lighter white */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin-top: 0.3rem;
            display: block;
        }

        /* Preloader */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f5f1e8;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out;
        }

        .preloader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-text {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: #666;
            font-size: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            header {
                padding: 1.5rem 1.5rem;
            }

            .headline {
                font-size: 3rem;
            }

            .subtext {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            header {
                padding: 1.2rem 1.2rem;
                flex-wrap: wrap;
            }

            .nav-menu {
                position: absolute;
                top: 100%;
                right: 0;
                background-color: rgba(60, 36, 21, 0.95);
                backdrop-filter: blur(10px);
                border-radius: 10px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
                padding: 1rem;
                margin-top: 0.5rem;
                opacity: 0;
                visibility: hidden;
                transform: translateY(-10px);
                transition: all 0.3s ease;
                z-index: 1001;
            }

            .nav-menu.active {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            nav ul {
                flex-direction: column;
                gap: 0.8rem;
                align-items: flex-end;
            }

            nav a {
                font-size: 0.8rem;
                padding: 0.5rem 1rem;
                display: block;
            }

            .hamburger {
                display: flex;
            }

            .headline {
                font-size: 2.5rem;
                line-height: 1.2;
                letter-spacing: -0.5px;
            }

            .subtext {
                font-size: 1rem;
                line-height: 1.5;
            }

            .cta-button {
                padding: 0.9rem 2rem;
                font-size: 0.95rem;
            }

            footer {
                bottom: 1rem;
                width: 100%;
                text-align: center;
            }

            .tagline {
                font-size: 0.9rem;
            }

            .copyright {
                font-size: 0.7rem;
            }

            .text-overlay {
                max-width: 85%;
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 0.8rem 0.5rem; /* Reduced padding */
                flex-direction: column;
                align-items: center;
                gap: 0.5rem; /* Reduced gap */
            }

            nav ul {
                justify-content: center;
                flex-wrap: wrap;
                margin: 0;
                padding: 0;
            }

            .brand-name {
                font-size: 1.1rem;
                margin: 0.2rem 0; /* Reduced margin */
            }

            nav a {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
                margin: 0.2rem 0.1rem; /* Reduced margin */
            }

            .headline {
                font-size: 2rem;
                padding: 0 0.5rem; /* Reduced padding */
                margin-bottom: 0.8rem;
                letter-spacing: -0.3px;
            }

            .subtext {
                font-size: 0.85rem;
                padding: 0 0.5rem; /* Reduced padding */
                line-height: 1.4;
            }

            .cta-button {
                padding: 0.7rem 1.5rem; /* Reduced padding */
                font-size: 0.85rem;
                margin-top: 1.5rem; /* Reduced margin */
            }

            .text-overlay {
                max-width: 98%; /* Increased width */
                padding: 0 0.5rem; /* Reduced padding */
            }

            .tagline {
                font-size: 0.8rem;
                margin-bottom: 0.3rem;
            }

            .copyright {
                font-size: 0.65rem;
            }

            .built-by {
                font-size: 0.6rem;
            }

            /* Reduce footer spacing */
            footer {
                bottom: 0.8rem;
                padding: 0 0.5rem;
            }
        }

        @media (max-width: 360px) {
            header {
                padding: 0.6rem 0.4rem; /* Further reduced padding */
            }

            .brand-name {
                font-size: 1rem;
            }

            nav a {
                font-size: 0.7rem;
                padding: 0.3rem 0.6rem; /* Further reduced padding */
            }

            .headline {
                font-size: 1.8rem;
                padding: 0 0.3rem; /* Further reduced padding */
            }

            .subtext {
                font-size: 0.75rem; /* Slightly smaller for very small screens */
                padding: 0 0.3rem; /* Further reduced padding */
            }

            .cta-button {
                padding: 0.6rem 1.2rem; /* Further reduced padding */
                font-size: 0.8rem;
            }

            footer {
                bottom: 0.6rem;
                padding: 0 0.3rem;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            nav a {
                padding: 0.7rem 1.5rem; /* Larger touch targets */
            }

            .cta-button {
                padding: 1rem 2rem; /* Larger touch targets */
            }
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="loading-text">Loading Experience...</div>
    </div>

    <header>
        <div class="brand-name">Frisky</div>
        <nav>
            <div class="nav-menu" id="nav-menu">
                <ul>
                    <li><a href="#product">Collection</a></li>
                    <li><a href="#story">Heritage</a></li>
                    <li><a href="https://www.linkedin.com/in/bisma-razzaq786/" target="_blank">Contact</a></li>
                </ul>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <div class="main-container">
        <canvas id="animationCanvas"></canvas>
        <div class="canvas-overlay"></div>

        <!-- Anchor points for navigation -->
        <div id="story" style="position: absolute; top: 10%; width: 100%; height: 1px;"></div>
        <div id="product" style="position: absolute; top: 90%; width: 100%; height: 1px;"></div>

        <!-- Text Overlays -->
        <div class="text-overlay" id="overlay1">
            <h1 class="headline">Precision begins with selection.</h1>
            <p class="subtext">Each ingredient chosen with meticulous care. No shortcuts, no compromises.</p>
        </div>

        <div class="text-overlay" id="overlay2">
            <h1 class="headline">Molten mastery.</h1>
            <p class="subtext">Chocolate transformed through exacting temperatures. Every drop holds intention.</p>
        </div>

        <div class="text-overlay" id="overlay3">
            <h1 class="headline">Engineering elegance.</h1>
            <p class="subtext">Where science meets artistry. Each curve calculated, each fold perfected.</p>
        </div>

        <div class="text-overlay" id="overlay4">
            <h1 class="headline">Heritage crafted. Future refined.</h1>
            <p class="subtext">A legacy of taste, shaped for tomorrow's connoisseurs.</p>
            <div class="cta-wrapper">
                <a href="https://www.foodpanda.pk/groceries/product/r1vf-1831/innovative-frisky-rolls-hazelnut-family-pack-box" target="_blank" class="cta-button">Experience Frisky</a>
            </div>
        </div>
    </div>

    <footer>
        <div class="tagline">Frisky Chocolate Excellence</div>
        <div class="copyright">Â© 2026 Frisky. All rights reserved.</div>
        <div class="built-by">Crafted with precision by Bisma ðŸ’—</div>
    </footer>

    <script>
        // Configuration object for easy customization
        const CONFIG = {
            brandName: "Frisky",
            copyrightYear: "2026",
            productName: "Frisky Rolls",
            contactLink: "https://www.linkedin.com/in/bisma-razzaq786/",
            ctaLink: "https://www.foodpanda.pk/groceries/product/r1vf-1831/innovative-frisky-rolls-hazelnut-family-pack-box",
            sequencePaths: {
                'sequence1': './sequence1/',
                'sequence2': './sequence2/',
                'sequence3': './sequence3/',
                'sequence4': './sequence4/'
            },
            overlayTexts: {
                'sequence1': {
                    headline: "Precision begins with selection.",
                    subtext: "Each ingredient chosen with meticulous care. No shortcuts, no compromises."
                },
                'sequence2': {
                    headline: "Molten mastery.",
                    subtext: "Chocolate transformed through exacting temperatures. Every drop holds intention."
                },
                'sequence3': {
                    headline: "Engineering elegance.",
                    subtext: "Where science meets artistry. Each curve calculated, each fold perfected."
                },
                'sequence4': {
                    headline: "Heritage crafted. Future refined.",
                    subtext: "A legacy of taste, shaped for tomorrow's connoisseurs."
                }
            }
        };

        class ScrollytellingAnimation {
            constructor() {
                this.canvas = document.getElementById('animationCanvas');
                this.ctx = this.canvas.getContext('2d');

                // Set canvas size
                this.resizeCanvas();

                // Explicit image arrays for each sequence
                this.sequence1 = [
                    "undefined_iwdl_001.jpg", "undefined_iwdl_002.jpg", "undefined_iwdl_003.jpg", "undefined_iwdl_004.jpg", "undefined_iwdl_005.jpg",
                    "undefined_iwdl_006.jpg", "undefined_iwdl_007.jpg", "undefined_iwdl_008.jpg", "undefined_iwdl_009.jpg", "undefined_iwdl_010.jpg",
                    "undefined_iwdl_011.jpg", "undefined_iwdl_012.jpg", "undefined_iwdl_013.jpg", "undefined_iwdl_014.jpg", "undefined_iwdl_015.jpg",
                    "undefined_iwdl_016.jpg", "undefined_iwdl_017.jpg", "undefined_iwdl_018.jpg", "undefined_iwdl_019.jpg", "undefined_iwdl_020.jpg",
                    "undefined_iwdl_021.jpg", "undefined_iwdl_022.jpg", "undefined_iwdl_023.jpg", "undefined_iwdl_024.jpg", "undefined_iwdl_025.jpg",
                    "undefined_iwdl_026.jpg", "undefined_iwdl_027.jpg", "undefined_iwdl_028.jpg", "undefined_iwdl_029.jpg", "undefined_iwdl_030.jpg",
                    "undefined_iwdl_031.jpg", "undefined_iwdl_032.jpg", "undefined_iwdl_033.jpg", "undefined_iwdl_034.jpg", "undefined_iwdl_035.jpg",
                    "undefined_iwdl_036.jpg", "undefined_iwdl_037.jpg", "undefined_iwdl_038.jpg", "undefined_iwdl_039.jpg", "undefined_iwdl_040.jpg",
                    "undefined_iwdl_041.jpg", "undefined_iwdl_042.jpg", "undefined_iwdl_043.jpg", "undefined_iwdl_044.jpg", "undefined_iwdl_045.jpg",
                    "undefined_iwdl_046.jpg", "undefined_iwdl_047.jpg", "undefined_iwdl_048.jpg", "undefined_iwdl_049.jpg", "undefined_iwdl_050.jpg",
                    "undefined_iwdl_051.jpg", "undefined_iwdl_052.jpg", "undefined_iwdl_053.jpg", "undefined_iwdl_054.jpg", "undefined_iwdl_055.jpg",
                    "undefined_iwdl_056.jpg", "undefined_iwdl_057.jpg", "undefined_iwdl_058.jpg", "undefined_iwdl_059.jpg", "undefined_iwdl_060.jpg",
                    "undefined_iwdl_061.jpg", "undefined_iwdl_062.jpg", "undefined_iwdl_063.jpg", "undefined_iwdl_064.jpg", "undefined_iwdl_065.jpg",
                    "undefined_iwdl_066.jpg", "undefined_iwdl_067.jpg", "undefined_iwdl_068.jpg", "undefined_iwdl_069.jpg", "undefined_iwdl_070.jpg",
                    "undefined_iwdl_071.jpg", "undefined_iwdl_072.jpg", "undefined_iwdl_073.jpg", "undefined_iwdl_074.jpg", "undefined_iwdl_075.jpg",
                    "undefined_iwdl_076.jpg", "undefined_iwdl_077.jpg", "undefined_iwdl_078.jpg", "undefined_iwdl_079.jpg", "undefined_iwdl_080.jpg",
                    "undefined_iwdl_081.jpg", "undefined_iwdl_082.jpg", "undefined_iwdl_083.jpg", "undefined_iwdl_084.jpg", "undefined_iwdl_085.jpg",
                    "undefined_iwdl_086.jpg", "undefined_iwdl_087.jpg", "undefined_iwdl_088.jpg", "undefined_iwdl_089.jpg", "undefined_iwdl_090.jpg",
                    "undefined_iwdl_091.jpg", "undefined_iwdl_092.jpg", "undefined_iwdl_093.jpg", "undefined_iwdl_094.jpg", "undefined_iwdl_095.jpg",
                    "undefined_iwdl_096.jpg", "undefined_iwdl_097.jpg", "undefined_iwdl_098.jpg", "undefined_iwdl_099.jpg", "undefined_iwdl_100.jpg",
                    "undefined_iwdl_101.jpg", "undefined_iwdl_102.jpg", "undefined_iwdl_103.jpg", "undefined_iwdl_104.jpg", "undefined_iwdl_105.jpg",
                    "undefined_iwdl_106.jpg", "undefined_iwdl_107.jpg", "undefined_iwdl_108.jpg", "undefined_iwdl_109.jpg", "undefined_iwdl_110.jpg",
                    "undefined_iwdl_111.jpg", "undefined_iwdl_112.jpg", "undefined_iwdl_113.jpg", "undefined_iwdl_114.jpg", "undefined_iwdl_115.jpg",
                    "undefined_iwdl_116.jpg", "undefined_iwdl_117.jpg", "undefined_iwdl_118.jpg", "undefined_iwdl_119.jpg", "undefined_iwdl_120.jpg"
                ];

                this.sequence2 = [
                    "Bright_Storm_19_Jan_24OD_001.jpg", "Bright_Storm_19_Jan_24OD_002.jpg", "Bright_Storm_19_Jan_24OD_003.jpg", "Bright_Storm_19_Jan_24OD_004.jpg", "Bright_Storm_19_Jan_24OD_005.jpg",
                    "Bright_Storm_19_Jan_24OD_006.jpg", "Bright_Storm_19_Jan_24OD_007.jpg", "Bright_Storm_19_Jan_24OD_008.jpg", "Bright_Storm_19_Jan_24OD_009.jpg", "Bright_Storm_19_Jan_24OD_010.jpg",
                    "Bright_Storm_19_Jan_24OD_011.jpg", "Bright_Storm_19_Jan_24OD_012.jpg", "Bright_Storm_19_Jan_24OD_013.jpg", "Bright_Storm_19_Jan_24OD_014.jpg", "Bright_Storm_19_Jan_24OD_015.jpg",
                    "Bright_Storm_19_Jan_24OD_016.jpg", "Bright_Storm_19_Jan_24OD_017.jpg", "Bright_Storm_19_Jan_24OD_018.jpg", "Bright_Storm_19_Jan_24OD_019.jpg", "Bright_Storm_19_Jan_24OD_020.jpg",
                    "Bright_Storm_19_Jan_24OD_021.jpg", "Bright_Storm_19_Jan_24OD_022.jpg", "Bright_Storm_19_Jan_24OD_023.jpg", "Bright_Storm_19_Jan_24OD_024.jpg", "Bright_Storm_19_Jan_24OD_025.jpg",
                    "Bright_Storm_19_Jan_24OD_026.jpg", "Bright_Storm_19_Jan_24OD_027.jpg", "Bright_Storm_19_Jan_24OD_028.jpg", "Bright_Storm_19_Jan_24OD_029.jpg", "Bright_Storm_19_Jan_24OD_030.jpg",
                    "Bright_Storm_19_Jan_24OD_031.jpg", "Bright_Storm_19_Jan_24OD_032.jpg", "Bright_Storm_19_Jan_24OD_033.jpg", "Bright_Storm_19_Jan_24OD_034.jpg", "Bright_Storm_19_Jan_24OD_035.jpg",
                    "Bright_Storm_19_Jan_24OD_036.jpg", "Bright_Storm_19_Jan_24OD_037.jpg", "Bright_Storm_19_Jan_24OD_038.jpg", "Bright_Storm_19_Jan_24OD_039.jpg", "Bright_Storm_19_Jan_24OD_040.jpg",
                    "Bright_Storm_19_Jan_24OD_041.jpg", "Bright_Storm_19_Jan_24OD_042.jpg", "Bright_Storm_19_Jan_24OD_043.jpg", "Bright_Storm_19_Jan_24OD_044.jpg", "Bright_Storm_19_Jan_24OD_045.jpg",
                    "Bright_Storm_19_Jan_24OD_046.jpg", "Bright_Storm_19_Jan_24OD_047.jpg", "Bright_Storm_19_Jan_24OD_048.jpg", "Bright_Storm_19_Jan_24OD_049.jpg", "Bright_Storm_19_Jan_24OD_050.jpg",
                    "Bright_Storm_19_Jan_24OD_051.jpg", "Bright_Storm_19_Jan_24OD_052.jpg", "Bright_Storm_19_Jan_24OD_053.jpg", "Bright_Storm_19_Jan_24OD_054.jpg", "Bright_Storm_19_Jan_24OD_055.jpg",
                    "Bright_Storm_19_Jan_24OD_056.jpg", "Bright_Storm_19_Jan_24OD_057.jpg", "Bright_Storm_19_Jan_24OD_058.jpg", "Bright_Storm_19_Jan_24OD_059.jpg", "Bright_Storm_19_Jan_24OD_060.jpg",
                    "Bright_Storm_19_Jan_24OD_061.jpg", "Bright_Storm_19_Jan_24OD_062.jpg", "Bright_Storm_19_Jan_24OD_063.jpg", "Bright_Storm_19_Jan_24OD_064.jpg", "Bright_Storm_19_Jan_24OD_065.jpg",
                    "Bright_Storm_19_Jan_24OD_066.jpg", "Bright_Storm_19_Jan_24OD_067.jpg", "Bright_Storm_19_Jan_24OD_068.jpg", "Bright_Storm_19_Jan_24OD_069.jpg", "Bright_Storm_19_Jan_24OD_070.jpg",
                    "Bright_Storm_19_Jan_24OD_071.jpg", "Bright_Storm_19_Jan_24OD_072.jpg", "Bright_Storm_19_Jan_24OD_073.jpg", "Bright_Storm_19_Jan_24OD_074.jpg", "Bright_Storm_19_Jan_24OD_075.jpg",
                    "Bright_Storm_19_Jan_24OD_076.jpg", "Bright_Storm_19_Jan_24OD_077.jpg", "Bright_Storm_19_Jan_24OD_078.jpg", "Bright_Storm_19_Jan_24OD_079.jpg", "Bright_Storm_19_Jan_24OD_080.jpg",
                    "Bright_Storm_19_Jan_24OD_081.jpg", "Bright_Storm_19_Jan_24OD_082.jpg", "Bright_Storm_19_Jan_24OD_083.jpg", "Bright_Storm_19_Jan_24OD_084.jpg", "Bright_Storm_19_Jan_24OD_085.jpg",
                    "Bright_Storm_19_Jan_24OD_086.jpg", "Bright_Storm_19_Jan_24OD_087.jpg", "Bright_Storm_19_Jan_24OD_088.jpg", "Bright_Storm_19_Jan_24OD_089.jpg", "Bright_Storm_19_Jan_24OD_090.jpg",
                    "Bright_Storm_19_Jan_24OD_091.jpg", "Bright_Storm_19_Jan_24OD_092.jpg", "Bright_Storm_19_Jan_24OD_093.jpg", "Bright_Storm_19_Jan_24OD_094.jpg", "Bright_Storm_19_Jan_24OD_095.jpg",
                    "Bright_Storm_19_Jan_24OD_096.jpg", "Bright_Storm_19_Jan_24OD_097.jpg", "Bright_Storm_19_Jan_24OD_098.jpg", "Bright_Storm_19_Jan_24OD_099.jpg", "Bright_Storm_19_Jan_24OD_100.jpg",
                    "Bright_Storm_19_Jan_24OD_101.jpg", "Bright_Storm_19_Jan_24OD_102.jpg", "Bright_Storm_19_Jan_24OD_103.jpg", "Bright_Storm_19_Jan_24OD_104.jpg", "Bright_Storm_19_Jan_24OD_105.jpg",
                    "Bright_Storm_19_Jan_24OD_106.jpg", "Bright_Storm_19_Jan_24OD_107.jpg", "Bright_Storm_19_Jan_24OD_108.jpg", "Bright_Storm_19_Jan_24OD_109.jpg", "Bright_Storm_19_Jan_24OD_110.jpg",
                    "Bright_Storm_19_Jan_24OD_111.jpg", "Bright_Storm_19_Jan_24OD_112.jpg", "Bright_Storm_19_Jan_24OD_113.jpg", "Bright_Storm_19_Jan_24OD_114.jpg", "Bright_Storm_19_Jan_24OD_115.jpg",
                    "Bright_Storm_19_Jan_24OD_116.jpg", "Bright_Storm_19_Jan_24OD_117.jpg", "Bright_Storm_19_Jan_24OD_118.jpg", "Bright_Storm_19_Jan_24OD_119.jpg", "Bright_Storm_19_Jan_24OD_120.jpg"
                ];

                this.sequence3 = [
                    "ezgif-frame-001.jpg", "ezgif-frame-002.jpg", "ezgif-frame-003.jpg", "ezgif-frame-004.jpg", "ezgif-frame-005.jpg",
                    "ezgif-frame-006.jpg", "ezgif-frame-007.jpg", "ezgif-frame-008.jpg", "ezgif-frame-009.jpg", "ezgif-frame-010.jpg",
                    "ezgif-frame-011.jpg", "ezgif-frame-012.jpg", "ezgif-frame-013.jpg", "ezgif-frame-014.jpg", "ezgif-frame-015.jpg",
                    "ezgif-frame-016.jpg", "ezgif-frame-017.jpg", "ezgif-frame-018.jpg", "ezgif-frame-019.jpg", "ezgif-frame-020.jpg",
                    "ezgif-frame-021.jpg", "ezgif-frame-022.jpg", "ezgif-frame-023.jpg", "ezgif-frame-024.jpg", "ezgif-frame-025.jpg",
                    "ezgif-frame-026.jpg", "ezgif-frame-027.jpg", "ezgif-frame-028.jpg", "ezgif-frame-029.jpg", "ezgif-frame-030.jpg",
                    "ezgif-frame-031.jpg", "ezgif-frame-032.jpg", "ezgif-frame-033.jpg", "ezgif-frame-034.jpg", "ezgif-frame-035.jpg",
                    "ezgif-frame-036.jpg", "ezgif-frame-037.jpg", "ezgif-frame-038.jpg", "ezgif-frame-039.jpg", "ezgif-frame-040.jpg",
                    "ezgif-frame-041.jpg", "ezgif-frame-042.jpg", "ezgif-frame-043.jpg", "ezgif-frame-044.jpg", "ezgif-frame-045.jpg",
                    "ezgif-frame-046.jpg", "ezgif-frame-047.jpg", "ezgif-frame-048.jpg", "ezgif-frame-049.jpg", "ezgif-frame-050.jpg",
                    "ezgif-frame-051.jpg", "ezgif-frame-052.jpg", "ezgif-frame-053.jpg", "ezgif-frame-054.jpg", "ezgif-frame-055.jpg",
                    "ezgif-frame-056.jpg", "ezgif-frame-057.jpg", "ezgif-frame-058.jpg", "ezgif-frame-059.jpg", "ezgif-frame-060.jpg",
                    "ezgif-frame-061.jpg", "ezgif-frame-062.jpg", "ezgif-frame-063.jpg", "ezgif-frame-064.jpg", "ezgif-frame-065.jpg",
                    "ezgif-frame-066.jpg", "ezgif-frame-067.jpg", "ezgif-frame-068.jpg", "ezgif-frame-069.jpg", "ezgif-frame-070.jpg",
                    "ezgif-frame-071.jpg", "ezgif-frame-072.jpg", "ezgif-frame-073.jpg", "ezgif-frame-074.jpg", "ezgif-frame-075.jpg",
                    "ezgif-frame-076.jpg", "ezgif-frame-077.jpg", "ezgif-frame-078.jpg", "ezgif-frame-079.jpg", "ezgif-frame-080.jpg"
                ];

                this.sequence4 = [
                    "ezgif-frame-001.jpg", "ezgif-frame-002.jpg", "ezgif-frame-003.jpg", "ezgif-frame-004.jpg", "ezgif-frame-005.jpg",
                    "ezgif-frame-006.jpg", "ezgif-frame-007.jpg", "ezgif-frame-008.jpg", "ezgif-frame-009.jpg", "ezgif-frame-010.jpg",
                    "ezgif-frame-011.jpg", "ezgif-frame-012.jpg", "ezgif-frame-013.jpg", "ezgif-frame-014.jpg", "ezgif-frame-015.jpg",
                    "ezgif-frame-016.jpg", "ezgif-frame-017.jpg", "ezgif-frame-018.jpg", "ezgif-frame-019.jpg", "ezgif-frame-020.jpg",
                    "ezgif-frame-021.jpg", "ezgif-frame-022.jpg", "ezgif-frame-023.jpg", "ezgif-frame-024.jpg", "ezgif-frame-025.jpg",
                    "ezgif-frame-026.jpg", "ezgif-frame-027.jpg", "ezgif-frame-028.jpg", "ezgif-frame-029.jpg", "ezgif-frame-030.jpg",
                    "ezgif-frame-031.jpg", "ezgif-frame-032.jpg", "ezgif-frame-033.jpg", "ezgif-frame-034.jpg", "ezgif-frame-035.jpg",
                    "ezgif-frame-036.jpg", "ezgif-frame-037.jpg", "ezgif-frame-038.jpg", "ezgif-frame-039.jpg", "ezgif-frame-040.jpg",
                    "ezgif-frame-041.jpg", "ezgif-frame-042.jpg", "ezgif-frame-043.jpg", "ezgif-frame-044.jpg", "ezgif-frame-045.jpg",
                    "ezgif-frame-046.jpg", "ezgif-frame-047.jpg", "ezgif-frame-048.jpg", "ezgif-frame-049.jpg", "ezgif-frame-050.jpg",
                    "ezgif-frame-051.jpg", "ezgif-frame-052.jpg", "ezgif-frame-053.jpg", "ezgif-frame-054.jpg", "ezgif-frame-055.jpg",
                    "ezgif-frame-056.jpg", "ezgif-frame-057.jpg", "ezgif-frame-058.jpg", "ezgif-frame-059.jpg", "ezgif-frame-060.jpg",
                    "ezgif-frame-061.jpg", "ezgif-frame-062.jpg", "ezgif-frame-063.jpg", "ezgif-frame-064.jpg", "ezgif-frame-065.jpg",
                    "ezgif-frame-066.jpg", "ezgif-frame-067.jpg", "ezgif-frame-068.jpg", "ezgif-frame-069.jpg", "ezgif-frame-070.jpg",
                    "ezgif-frame-071.jpg", "ezgif-frame-072.jpg", "ezgif-frame-073.jpg", "ezgif-frame-074.jpg"
                ];

                this.sequences = {
                    'sequence1': [],
                    'sequence2': [],
                    'sequence3': [],
                    'sequence4': []
                };

                this.currentSequence = 'sequence1';
                this.currentFrame = 0;
                this.totalFrames = 0;
                this.isLoaded = false;

                // Scroll tracking
                this.scrollProgress = 0;
                this.lastScrollY = 0;

                // DOM elements
                this.overlays = {
                    'sequence1': document.getElementById('overlay1'),
                    'sequence2': document.getElementById('overlay2'),
                    'sequence3': document.getElementById('overlay3'),
                    'sequence4': document.getElementById('overlay4')
                };

                this.preloader = document.querySelector('.preloader');
                this.ctaButton = document.querySelector('.cta-button');

                this.init();
            }

            async init() {
                await this.loadImages();
                this.hidePreloader();
                this.setupEventListeners();
                this.animate();
            }

            resizeCanvas() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            async loadImages() {
                // Load images for sequence1
                for (const filename of this.sequence1) {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    try {
                        await this.loadImagePromise(img, `${CONFIG.sequencePaths['sequence1']}${filename}`);
                        this.sequences['sequence1'].push(img);
                    } catch (error) {
                        console.warn(`Failed to load image: ${CONFIG.sequencePaths['sequence1']}${filename}`, error);
                        break; // Stop if an image fails to load
                    }
                }

                // Load images for sequence2
                for (const filename of this.sequence2) {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    try {
                        await this.loadImagePromise(img, `${CONFIG.sequencePaths['sequence2']}${filename}`);
                        this.sequences['sequence2'].push(img);
                    } catch (error) {
                        console.warn(`Failed to load image: ${CONFIG.sequencePaths['sequence2']}${filename}`, error);
                        break; // Stop if an image fails to load
                    }
                }

                // Load images for sequence3
                for (const filename of this.sequence3) {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    try {
                        await this.loadImagePromise(img, `${CONFIG.sequencePaths['sequence3']}${filename}`);
                        this.sequences['sequence3'].push(img);
                    } catch (error) {
                        console.warn(`Failed to load image: ${CONFIG.sequencePaths['sequence3']}${filename}`, error);
                        break; // Stop if an image fails to load
                    }
                }

                // Load images for sequence4
                for (const filename of this.sequence4) {
                    const img = new Image();
                    img.crossOrigin = 'anonymous';
                    try {
                        await this.loadImagePromise(img, `${CONFIG.sequencePaths['sequence4']}${filename}`);
                        this.sequences['sequence4'].push(img);
                    } catch (error) {
                        console.warn(`Failed to load image: ${CONFIG.sequencePaths['sequence4']}${filename}`, error);
                        break; // Stop if an image fails to load
                    }
                }

                this.totalFrames = Math.max(
                    this.sequences['sequence1'].length,
                    this.sequences['sequence2'].length,
                    this.sequences['sequence3'].length,
                    this.sequences['sequence4'].length
                );

                this.isLoaded = true;
            }

            loadImagePromise(img, url) {
                return new Promise((resolve, reject) => {
                    // Add timeout to prevent hanging requests
                    const timeout = setTimeout(() => {
                        reject(new Error(`Timeout loading image: ${url}`));
                    }, 10000); // 10 second timeout

                    img.onload = () => {
                        clearTimeout(timeout);
                        resolve(img);
                    };
                    img.onerror = () => {
                        clearTimeout(timeout);
                        reject(new Error(`Failed to load image: ${url}`));
                    };

                    // Add referrerpolicy for GitHub Pages compatibility
                    img.referrerpolicy = 'no-referrer';
                    img.src = url;
                });
            }

            hidePreloader() {
                setTimeout(() => {
                    this.preloader.classList.add('hidden');
                }, 500);
            }

            setupEventListeners() {
                // Optimize resize event handling for mobile
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        this.resizeCanvas();
                    }, 100);
                });

                // Throttle scroll events for better performance on mobile
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    if (!scrollTimeout) {
                        scrollTimeout = setTimeout(() => {
                            this.updateScrollProgress();
                            scrollTimeout = null;
                        }, 16); // ~60fps
                    }
                });

                // Add touch event listeners for better mobile experience
                window.addEventListener('touchstart', () => {}, { passive: true });
                window.addEventListener('touchmove', () => {}, { passive: true });
                window.addEventListener('touchend', () => {}, { passive: true });
            }

            updateScrollProgress() {
                const scrollY = window.scrollY;
                const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
                this.scrollProgress = Math.max(0, Math.min(1, scrollY / documentHeight));
            }

            getCurrentSequenceAndFrame() {
                const progress = this.scrollProgress;

                if (progress < 0.25) {
                    // sequence1: 0% to 25% - Ingredients
                    const sequenceProgress = progress / 0.25;
                    const frameIndex = Math.floor(sequenceProgress * (this.sequences['sequence1'].length - 1));
                    return { sequence: 'sequence1', frame: Math.max(0, Math.min(frameIndex, this.sequences['sequence1'].length - 1)) };
                } else if (progress < 0.5) {
                    // sequence2: 25% to 50% - Chocolate Flow
                    const sequenceProgress = (progress - 0.25) / 0.25;
                    const frameIndex = Math.floor(sequenceProgress * (this.sequences['sequence2'].length - 1));
                    return { sequence: 'sequence2', frame: Math.max(0, Math.min(frameIndex, this.sequences['sequence2'].length - 1)) };
                } else if (progress < 0.75) {
                    // sequence3: 50% to 75% - Wafer Formation
                    const sequenceProgress = (progress - 0.5) / 0.25;
                    const frameIndex = Math.floor(sequenceProgress * (this.sequences['sequence3'].length - 1));
                    return { sequence: 'sequence3', frame: Math.max(0, Math.min(frameIndex, this.sequences['sequence3'].length - 1)) };
                } else {
                    // sequence4: 75% to 100% - Final Pack
                    const sequenceProgress = (progress - 0.75) / 0.25;
                    const frameIndex = Math.floor(sequenceProgress * (this.sequences['sequence4'].length - 1));
                    return { sequence: 'sequence4', frame: Math.max(0, Math.min(frameIndex, this.sequences['sequence4'].length - 1)) };
                }
            }

            updateOverlays(currentSequence) {
                // Hide all overlays
                Object.values(this.overlays).forEach(overlay => {
                    overlay.classList.remove('active');
                });

                // Show current sequence overlay
                this.overlays[currentSequence].classList.add('active');

                // Update overlay text content dynamically
                if (currentSequence === 'sequence1') {
                    document.querySelector('#overlay1 .headline').textContent = CONFIG.overlayTexts['sequence1'].headline;
                    document.querySelector('#overlay1 .subtext').textContent = CONFIG.overlayTexts['sequence1'].subtext;
                } else if (currentSequence === 'sequence2') {
                    document.querySelector('#overlay2 .headline').textContent = CONFIG.overlayTexts['sequence2'].headline;
                    document.querySelector('#overlay2 .subtext').textContent = CONFIG.overlayTexts['sequence2'].subtext;
                } else if (currentSequence === 'sequence3') {
                    document.querySelector('#overlay3 .headline').textContent = CONFIG.overlayTexts['sequence3'].headline;
                    document.querySelector('#overlay3 .subtext').textContent = CONFIG.overlayTexts['sequence3'].subtext;
                } else if (currentSequence === 'sequence4') {
                    document.querySelector('#overlay4 .headline').textContent = CONFIG.overlayTexts['sequence4'].headline;
                    document.querySelector('#overlay4 .subtext').textContent = CONFIG.overlayTexts['sequence4'].subtext;
                }

                // Handle CTA button visibility
                if (currentSequence === 'sequence4' && this.scrollProgress > 0.95) {
                    this.ctaButton.classList.add('show');
                } else {
                    this.ctaButton.classList.remove('show');
                }
            }

            drawCurrentFrame() {
                if (!this.isLoaded) return;

                const { sequence, frame } = this.getCurrentSequenceAndFrame();
                const currentImg = this.sequences[sequence][frame];

                if (currentImg) {
                    // Clear canvas
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                    // Calculate aspect ratio to fit image while maintaining proportions
                    const imgRatio = currentImg.width / currentImg.height;
                    const canvasRatio = this.canvas.width / this.canvas.height;

                    let drawWidth, drawHeight, offsetX, offsetY;

                    if (imgRatio > canvasRatio) {
                        // Image is wider than canvas - fit to width
                        drawWidth = this.canvas.width;
                        drawHeight = this.canvas.width / imgRatio;
                        offsetX = 0;
                        offsetY = (this.canvas.height - drawHeight) / 2;
                    } else {
                        // Image is taller than canvas - fit to height
                        drawHeight = this.canvas.height;
                        drawWidth = this.canvas.height * imgRatio;
                        offsetX = (this.canvas.width - drawWidth) / 2;
                        offsetY = 0;
                    }

                    // Draw image centered with object-contain behavior
                    this.ctx.drawImage(currentImg, offsetX, offsetY, drawWidth, drawHeight);
                }

                // Update overlays
                this.updateOverlays(sequence);
            }

            animate() {
                this.updateScrollProgress();
                this.drawCurrentFrame();
                requestAnimationFrame(() => this.animate());
            }
        }

        // Hamburger menu functionality
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');

        hamburger.addEventListener('click', () => {
            navMenu.classList.toggle('active');

            // Animate hamburger lines
            hamburger.classList.toggle('active');
        });

        // Close menu when clicking on a link
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                hamburger.classList.remove('active');
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (event) => {
            if (!navMenu.contains(event.target) && !hamburger.contains(event.target)) {
                navMenu.classList.remove('active');
                hamburger.classList.remove('active');
            }
        });

        // Smooth scrolling for anchor links with mobile optimization
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const targetId = this.getAttribute('href');
                if (targetId === '#') return;

                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
                    const offsetPosition = targetPosition - 100; // Adjust for header height

                    // Check if smooth scrolling is supported and if it's a mobile device
                    const isMobile = window.matchMedia('(max-width: 768px)').matches;

                    if ('scrollBehavior' in document.documentElement.style && !isMobile) {
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    } else {
                        // Fallback for older browsers and mobile devices
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'auto'
                        });

                        // On mobile, ensure the element is properly positioned after scroll
                        if (isMobile) {
                            setTimeout(() => {
                                const newTargetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
                                const newOffsetPosition = newTargetPosition - 100;
                                window.scrollTo({top: newOffsetPosition, behavior: 'auto'});
                            }, 100);
                        }
                    }
                }
            });
        });

        // Initialize the animation when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Update brand name and copyright with config
            document.querySelector('.brand-name').textContent = CONFIG.brandName;
            document.querySelector('.copyright').textContent = `Â© ${CONFIG.copyrightYear} ${CONFIG.brandName}. All rights reserved.`;

            // Update navigation links with config
            document.querySelector('nav a[href="https://www.linkedin.com/in/bisma-razzaq786/"]').href = CONFIG.contactLink;
            document.querySelector('.cta-button').href = CONFIG.ctaLink;

            // Update overlay texts with config
            document.querySelector('#overlay1 .headline').textContent = CONFIG.overlayTexts['sequence1'].headline;
            document.querySelector('#overlay1 .subtext').textContent = CONFIG.overlayTexts['sequence1'].subtext;
            document.querySelector('#overlay2 .headline').textContent = CONFIG.overlayTexts['sequence2'].headline;
            document.querySelector('#overlay2 .subtext').textContent = CONFIG.overlayTexts['sequence2'].subtext;
            document.querySelector('#overlay3 .headline').textContent = CONFIG.overlayTexts['sequence3'].headline;
            document.querySelector('#overlay3 .subtext').textContent = CONFIG.overlayTexts['sequence3'].subtext;
            document.querySelector('#overlay4 .headline').textContent = CONFIG.overlayTexts['sequence4'].headline;
            document.querySelector('#overlay4 .subtext').textContent = CONFIG.overlayTexts['sequence4'].subtext;

            new ScrollytellingAnimation();
        });
    </script>
</body>
</html>